<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <link rel="stylesheet" type="text/css" href="build/mirador/css/mirador-combined.css">
    <title>Mirador Viewer</title>
    <style type="text/css">
     #viewer {
       width: 100%;
       height: 100%;
       position: fixed;
     }
    </style>
  </head>
  <body>
    <div id="viewer"></div>

    <script src="build/mirador/mirador.js"></script>
    <script type="text/javascript">

     $(function() {
        url = window.location.href;
        var regexpid = new RegExp("[?&]pid(=([^&#]*)|&|#|$)"),
                resultspid = regexpid.exec(url);
        var regexmf = new RegExp("[?&]manifest(=([^&#]*)|&|#|$)"),
                resultsmf = regexmf.exec(url);
	
        manURL = "http://search.lib.virginia.edu/catalog/uva-lib:0/iiif/manifest.json";
        if (resultspid) { if (resultspid[2]) {
                manURL = "http://search.lib.virginia.edu/catalog/" + resultspid[2] + "/iiif/manifest.json";
        } } 
        if (resultsmf) { if (resultsmf[2]) { if (resultsmf[2].toLowerCase().includes("virginia.edu")) {
		manURL =  resultsmf[2];
        } } }
       Mirador({
	 "showAddFromURLBox": false,
         "id": "viewer",
         "layout": "1x1",
         "data": [
           	{ "manifestUri": manURL, "location": "University of Virginia"},
                { "manifestUri": "http://fedora01.lib.virginia.edu:8080/accessions/image-sets/slideshow/iiif-manifest.json", "location": "University of Virginia Digital Library"},
                { "manifestUri": "http://search.lib.virginia.edu/catalog/uva-lib:1017293/iiif/manifest.json", "location": "University of Virginia Digital Library"},
                { "manifestUri": "http://search.lib.virginia.edu/catalog/uva-lib:2594787/iiif/manifest.json", "location": "University of Virginia Digital Library"},
                { "manifestUri": "http://search.lib.virginia.edu/catalog/uva-lib:1004371/iiif/manifest.json", "location": "University of Virginia Digital Library"},
                { "manifestUri": "http://search.lib.virginia.edu/catalog/uva-lib:743042/iiif/manifest.json", "location": "University of Virginia Digital Library"},
                { "manifestUri": "http://search.lib.virginia.edu/catalog/uva-lib:2287415/iiif/manifest.json", "location": "University of Virginia Digital Library"},
                { "manifestUri": "http://search.lib.virginia.edu/catalog/uva-lib:1003954/iiif/manifest.json", "location": "University of Virginia Digital Library"},
                { "manifestUri": "http://search.lib.virginia.edu/catalog/uva-lib:2201048/iiif/manifest.json", "location": "University of Virginia Digital Library"},
                { "manifestUri": "http://search.lib.virginia.edu/catalog/uva-lib:2429996/iiif/manifest.json", "location": "University of Virginia Digital Library"},
                { "manifestUri": "http://search.lib.virginia.edu/catalog/uva-lib:2466826/iiif/manifest.json", "location": "University of Virginia Digital Library"},
                { "manifestUri": "http://search.lib.virginia.edu/catalog/uva-lib:2429993/iiif/manifest.json", "location": "University of Virginia Digital Library"},
         ],
         "windowObjects": [
	    {
                "loadedManifest": manURL,
                "viewType" : "ImageView",
		"annotationLayer": false,
            }
	],
       });
     });
    </script>
  </body>
</html>
