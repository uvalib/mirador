<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <link rel="stylesheet" type="text/css" href="build/mirador/css/mirador-combined.css">
    <title>Mirador Viewer</title>
    <style type="text/css">
     #viewer {
       width: 100%;
       height: 100%;
       position: fixed;
     }
    </style>
  </head>
  <body>
    <div id="viewer"></div>

    <script src="build/mirador/mirador.js"></script>
    <script type="text/javascript">

     $(function() {
        url = window.location.href;
        var regex = new RegExp("[?&]pid(=([^&#]*)|&|#|$)"),
                results = regex.exec(url);
        manURL = window.location.protocol + "//search.lib.virginia.edu/catalog/uva-lib:0/iiif/manifest.json";
        if (results) { if (results[2]) {
                manURL = window.location.protocol + "//search.lib.virginia.edu/catalog/" + results[2] + "/iiif/manifest.json";
        } }
       Mirador({
         "id": "viewer",
         "layout": "1x1",
         "data": [
           	{ "manifestUri": manURL, "location": "University of Virginia"},
                { "manifestUri": window.location.protocol + "//search.lib.virginia.edu/catalog/uva-lib:1017293/iiif/manifest.json", "location": "University of Virginia Digital Library"},
                { "manifestUri": window.location.protocol + "//search.lib.virginia.edu/catalog/uva-lib:2594787/iiif/manifest.json", "location": "University of Virginia Digital Library"},
                { "manifestUri": window.location.protocol + "//search.lib.virginia.edu/catalog/uva-lib:1004371/iiif/manifest.json", "location": "University of Virginia Digital Library"},
                { "manifestUri": window.location.protocol + "//search.lib.virginia.edu/catalog/uva-lib:743042/iiif/manifest.json", "location": "University of Virginia Digital Library"},
                { "manifestUri": window.location.protocol + "//search.lib.virginia.edu/catalog/uva-lib:2287415/iiif/manifest.json", "location": "University of Virginia Digital Library"},
                { "manifestUri": window.location.protocol + "//search.lib.virginia.edu/catalog/uva-lib:1003954/iiif/manifest.json", "location": "University of Virginia Digital Library"},
                { "manifestUri": window.location.protocol + "//search.lib.virginia.edu/catalog/uva-lib:2201048/iiif/manifest.json", "location": "University of Virginia Digital Library"},
                { "manifestUri": window.location.protocol + "//search.lib.virginia.edu/catalog/uva-lib:2429996/iiif/manifest.json", "location": "University of Virginia Digital Library"},
                { "manifestUri": window.location.protocol + "//search.lib.virginia.edu/catalog/uva-lib:2466826/iiif/manifest.json", "location": "University of Virginia Digital Library"},
                { "manifestUri": window.location.protocol + "//search.lib.virginia.edu/catalog/uva-lib:2429993/iiif/manifest.json", "location": "University of Virginia Digital Library"},
         ],
         "windowObjects": [
	    {
                "loadedManifest": manURL,
                "viewType" : "ImageView",
            }
	],
         "annotationEndpoint": { "name":"Local Storage", "module": "LocalStorageEndpoint" }
       });
     });
    </script>
  </body>
</html>
